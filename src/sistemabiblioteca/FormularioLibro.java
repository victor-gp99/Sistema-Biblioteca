package sistemabiblioteca;

import java.io.File;
import java.io.IOException;
import java.nio.file.Files;
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.ImageIcon;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JOptionPane;

/**
 *
 * @author PP
 */
public class FormularioLibro extends javax.swing.JFrame {
    Connection con;
    /**
     * Creates new form FormularioLibro
     * @param con
     */
    public FormularioLibro(Connection con) {
        initComponents();
        setLocationRelativeTo(null);
        this.con = con;
        fillInComboEditorial();
        fillInComboAutor();
    }
    
    public FormularioLibro(){
        initComponents();
        setLocationRelativeTo(null);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        buttonGroupTipo = new javax.swing.ButtonGroup();
        fileChooserImagen = new javax.swing.JFileChooser();
        jPanel2 = new javax.swing.JPanel();
        exit1 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        minimize1 = new javax.swing.JLabel();
        jPanel3 = new javax.swing.JPanel();
        jTextFieldTamaño = new javax.swing.JTextField();
        jLabelFecha = new javax.swing.JLabel();
        jTextFieldFecha = new javax.swing.JTextField();
        jLabelTitulo = new javax.swing.JLabel();
        jLabelLugar = new javax.swing.JLabel();
        jTextFieldTitulo = new javax.swing.JTextField();
        jTextFieldLugar = new javax.swing.JTextField();
        jTextFieldIsbn = new javax.swing.JTextField();
        jLabelDescripcion3 = new javax.swing.JLabel();
        jTextFieldAnioPub = new javax.swing.JTextField();
        puzzle1 = new javax.swing.JLabel();
        jLabelIsbn = new javax.swing.JLabel();
        jComboBoxAutor = new javax.swing.JComboBox<>();
        jRadioButtonEBook = new javax.swing.JRadioButton();
        jLabelDescripcion4 = new javax.swing.JLabel();
        jRadioButtonPapel = new javax.swing.JRadioButton();
        labelImagen = new javax.swing.JLabel();
        jLabelAnioPub = new javax.swing.JLabel();
        jLabelDescripcion = new javax.swing.JLabel();
        jButtonCancelar = new javax.swing.JButton();
        jButtonAceptar = new javax.swing.JButton();
        jLabelDescripcion1 = new javax.swing.JLabel();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTextAreaDescripcion = new javax.swing.JTextArea();
        jComboBoxEditorial = new javax.swing.JComboBox<>();
        jLabelDescripcion2 = new javax.swing.JLabel();
        jLabelPrecio = new javax.swing.JLabel();
        jSpinnerPrecio = new javax.swing.JSpinner();
        jLabelTamaño = new javax.swing.JLabel();
        buttonImagen = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setUndecorated(true);
        setResizable(false);

        jPanel2.setBackground(new java.awt.Color(92, 151, 191));

        exit1.setFont(new java.awt.Font("Tahoma", 1, 24)); // NOI18N
        exit1.setForeground(new java.awt.Color(255, 255, 255));
        exit1.setText("X");
        exit1.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        exit1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                exit1MouseClicked(evt);
            }
        });

        jLabel5.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabel5.setForeground(new java.awt.Color(255, 255, 255));
        jLabel5.setText("Nuevo libro");

        minimize1.setFont(new java.awt.Font("Tahoma", 1, 24)); // NOI18N
        minimize1.setForeground(new java.awt.Color(255, 255, 255));
        minimize1.setText("--");
        minimize1.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        minimize1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                minimize1MouseClicked(evt);
            }
        });

        jPanel3.setBackground(new java.awt.Color(34, 49, 63));

        jTextFieldTamaño.setBackground(new java.awt.Color(108, 122, 137));
        jTextFieldTamaño.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTextFieldTamaño.setForeground(new java.awt.Color(236, 240, 241));
        jTextFieldTamaño.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        jTextFieldTamaño.setEnabled(false);

        jLabelFecha.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabelFecha.setForeground(new java.awt.Color(236, 240, 241));
        jLabelFecha.setText("Fecha de impresión:");
        jLabelFecha.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jLabelFechaMouseClicked(evt);
            }
        });

        jTextFieldFecha.setBackground(new java.awt.Color(108, 122, 137));
        jTextFieldFecha.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTextFieldFecha.setForeground(new java.awt.Color(236, 240, 241));
        jTextFieldFecha.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        jTextFieldFecha.setText("AAAA-MM-DD");

        jLabelTitulo.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabelTitulo.setForeground(new java.awt.Color(236, 240, 241));
        jLabelTitulo.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabelTitulo.setText("Título:");

        jLabelLugar.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabelLugar.setForeground(new java.awt.Color(236, 240, 241));
        jLabelLugar.setText("Lugar de impresión:");

        jTextFieldTitulo.setBackground(new java.awt.Color(108, 122, 137));
        jTextFieldTitulo.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTextFieldTitulo.setForeground(new java.awt.Color(236, 240, 241));
        jTextFieldTitulo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextFieldTituloActionPerformed(evt);
            }
        });

        jTextFieldLugar.setBackground(new java.awt.Color(108, 122, 137));
        jTextFieldLugar.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTextFieldLugar.setForeground(new java.awt.Color(236, 240, 241));
        jTextFieldLugar.setHorizontalAlignment(javax.swing.JTextField.CENTER);

        jTextFieldIsbn.setBackground(new java.awt.Color(108, 122, 137));
        jTextFieldIsbn.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTextFieldIsbn.setForeground(new java.awt.Color(236, 240, 241));
        jTextFieldIsbn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextFieldIsbnActionPerformed(evt);
            }
        });

        jLabelDescripcion3.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabelDescripcion3.setForeground(new java.awt.Color(236, 240, 241));
        jLabelDescripcion3.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelDescripcion3.setText("Información del libro:");

        jTextFieldAnioPub.setBackground(new java.awt.Color(108, 122, 137));
        jTextFieldAnioPub.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTextFieldAnioPub.setForeground(new java.awt.Color(236, 240, 241));
        jTextFieldAnioPub.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextFieldAnioPubActionPerformed(evt);
            }
        });

        puzzle1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/imgs/Libros.jpg"))); // NOI18N

        jLabelIsbn.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabelIsbn.setForeground(new java.awt.Color(236, 240, 241));
        jLabelIsbn.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabelIsbn.setText("Isbn:");

        jComboBoxAutor.setBackground(new java.awt.Color(108, 122, 137));
        jComboBoxAutor.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jComboBoxAutor.setForeground(new java.awt.Color(236, 240, 241));

        jRadioButtonEBook.setBackground(new java.awt.Color(34, 49, 63));
        buttonGroupTipo.add(jRadioButtonEBook);
        jRadioButtonEBook.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        jRadioButtonEBook.setForeground(new java.awt.Color(236, 240, 241));
        jRadioButtonEBook.setText("e-Book");
        jRadioButtonEBook.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jRadioButtonEBook.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jRadioButtonEBookMouseClicked(evt);
            }
        });

        jLabelDescripcion4.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabelDescripcion4.setForeground(new java.awt.Color(236, 240, 241));
        jLabelDescripcion4.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabelDescripcion4.setText("Autor:");

        jRadioButtonPapel.setBackground(new java.awt.Color(34, 49, 63));
        buttonGroupTipo.add(jRadioButtonPapel);
        jRadioButtonPapel.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        jRadioButtonPapel.setForeground(new java.awt.Color(236, 240, 241));
        jRadioButtonPapel.setSelected(true);
        jRadioButtonPapel.setText("Papel");
        jRadioButtonPapel.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jRadioButtonPapel.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jRadioButtonPapelMouseClicked(evt);
            }
        });

        labelImagen.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        labelImagen.setForeground(new java.awt.Color(236, 240, 241));
        labelImagen.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        labelImagen.setText("Seleccionar imagen...");

        jLabelAnioPub.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabelAnioPub.setForeground(new java.awt.Color(236, 240, 241));
        jLabelAnioPub.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabelAnioPub.setText("Año de publicación:");

        jLabelDescripcion.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabelDescripcion.setForeground(new java.awt.Color(236, 240, 241));
        jLabelDescripcion.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabelDescripcion.setText("Descripción:");

        jButtonCancelar.setBackground(new java.awt.Color(235, 151, 78));
        jButtonCancelar.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        jButtonCancelar.setForeground(new java.awt.Color(236, 240, 241));
        jButtonCancelar.setText("Cancelar");
        jButtonCancelar.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jButtonCancelar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonCancelarActionPerformed(evt);
            }
        });

        jButtonAceptar.setBackground(new java.awt.Color(137, 196, 244));
        jButtonAceptar.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        jButtonAceptar.setForeground(new java.awt.Color(236, 240, 241));
        jButtonAceptar.setText("Aceptar");
        jButtonAceptar.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jButtonAceptar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonAceptarActionPerformed(evt);
            }
        });

        jLabelDescripcion1.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabelDescripcion1.setForeground(new java.awt.Color(236, 240, 241));
        jLabelDescripcion1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelDescripcion1.setText("Tipo de libro:");

        jTextAreaDescripcion.setBackground(new java.awt.Color(108, 122, 137));
        jTextAreaDescripcion.setColumns(20);
        jTextAreaDescripcion.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTextAreaDescripcion.setForeground(new java.awt.Color(236, 240, 241));
        jTextAreaDescripcion.setLineWrap(true);
        jTextAreaDescripcion.setRows(5);
        jScrollPane1.setViewportView(jTextAreaDescripcion);

        jComboBoxEditorial.setBackground(new java.awt.Color(108, 122, 137));
        jComboBoxEditorial.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jComboBoxEditorial.setForeground(new java.awt.Color(236, 240, 241));

        jLabelDescripcion2.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabelDescripcion2.setForeground(new java.awt.Color(236, 240, 241));
        jLabelDescripcion2.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabelDescripcion2.setText("Editorial:");

        jLabelPrecio.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabelPrecio.setForeground(new java.awt.Color(236, 240, 241));
        jLabelPrecio.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabelPrecio.setText("Precio:");

        jSpinnerPrecio.setModel(new javax.swing.SpinnerNumberModel(-1.0f, null, null, 1.0f));

        jLabelTamaño.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabelTamaño.setForeground(new java.awt.Color(236, 240, 241));
        jLabelTamaño.setText("Tamaño del archivo:");
        jLabelTamaño.setEnabled(false);

        buttonImagen.setBackground(new java.awt.Color(103, 128, 159));
        buttonImagen.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        buttonImagen.setForeground(new java.awt.Color(236, 240, 241));
        buttonImagen.setText("Seleccionar");
        buttonImagen.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                buttonImagenActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGap(68, 68, 68)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabelDescripcion4)
                            .addComponent(jLabelDescripcion2)
                            .addComponent(jLabelPrecio))
                        .addGap(64, 64, 64)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jSpinnerPrecio, javax.swing.GroupLayout.PREFERRED_SIZE, 271, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jComboBoxEditorial, javax.swing.GroupLayout.PREFERRED_SIZE, 271, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jComboBoxAutor, javax.swing.GroupLayout.PREFERRED_SIZE, 271, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addContainerGap()
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                .addComponent(jLabelAnioPub)
                                .addGap(24, 24, 24)
                                .addComponent(jTextFieldAnioPub, javax.swing.GroupLayout.PREFERRED_SIZE, 271, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addGroup(jPanel3Layout.createSequentialGroup()
                                    .addGap(151, 151, 151)
                                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 271, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addComponent(jLabelDescripcion))))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGap(48, 48, 48)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                .addComponent(jLabelTitulo)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(jTextFieldTitulo, javax.swing.GroupLayout.PREFERRED_SIZE, 271, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                .addComponent(jLabelIsbn)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(jTextFieldIsbn, javax.swing.GroupLayout.PREFERRED_SIZE, 271, javax.swing.GroupLayout.PREFERRED_SIZE)))))
                .addGap(92, 92, 92)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jLabelTamaño)
                            .addComponent(jLabelFecha))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jTextFieldFecha, javax.swing.GroupLayout.PREFERRED_SIZE, 320, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jTextFieldTamaño, javax.swing.GroupLayout.PREFERRED_SIZE, 320, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addComponent(jLabelLugar)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jTextFieldLugar, javax.swing.GroupLayout.PREFERRED_SIZE, 320, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                .addComponent(puzzle1, javax.swing.GroupLayout.PREFERRED_SIZE, 300, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGroup(jPanel3Layout.createSequentialGroup()
                                    .addComponent(labelImagen, javax.swing.GroupLayout.PREFERRED_SIZE, 154, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                    .addComponent(buttonImagen))
                                .addGroup(jPanel3Layout.createSequentialGroup()
                                    .addComponent(jButtonAceptar)
                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(jButtonCancelar))))))
                .addContainerGap(184, Short.MAX_VALUE))
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel3Layout.createSequentialGroup()
                .addGap(129, 129, 129)
                .addComponent(jLabelDescripcion3, javax.swing.GroupLayout.PREFERRED_SIZE, 438, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabelDescripcion1, javax.swing.GroupLayout.PREFERRED_SIZE, 230, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addComponent(jRadioButtonPapel, javax.swing.GroupLayout.PREFERRED_SIZE, 98, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(40, 40, 40)
                        .addComponent(jRadioButtonEBook, javax.swing.GroupLayout.PREFERRED_SIZE, 98, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addGap(238, 238, 238))
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addGap(29, 29, 29)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabelDescripcion3)
                    .addComponent(jLabelDescripcion1))
                .addGap(18, 18, 18)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jRadioButtonPapel)
                    .addComponent(jRadioButtonEBook))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jTextFieldTitulo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabelTitulo))
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel3Layout.createSequentialGroup()
                        .addGap(189, 189, 189)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabelDescripcion)
                            .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 268, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                    .addComponent(jLabelLugar)
                                    .addComponent(jTextFieldLugar, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addGap(55, 55, 55)
                                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                    .addComponent(buttonImagen)
                                    .addComponent(labelImagen))
                                .addGap(7, 7, 7)
                                .addComponent(puzzle1, javax.swing.GroupLayout.PREFERRED_SIZE, 250, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 59, Short.MAX_VALUE))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                .addGap(117, 117, 117)
                                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jTextFieldAnioPub, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addGroup(jPanel3Layout.createSequentialGroup()
                                        .addGap(2, 2, 2)
                                        .addComponent(jLabelAnioPub))))
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                .addGap(37, 37, 37)
                                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                    .addComponent(jLabelTamaño)
                                    .addComponent(jTextFieldIsbn, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(jLabelIsbn)
                                    .addComponent(jTextFieldTamaño, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addGap(39, 39, 39)
                                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                    .addComponent(jTextFieldFecha, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(jLabelFecha))))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jComboBoxEditorial, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabelDescripcion2))
                .addGap(14, 14, 14)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jComboBoxAutor, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabelDescripcion4)
                    .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(jButtonAceptar, javax.swing.GroupLayout.PREFERRED_SIZE, 48, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(jButtonCancelar, javax.swing.GroupLayout.PREFERRED_SIZE, 48, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addGap(33, 33, 33)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jSpinnerPrecio, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabelPrecio))
                .addGap(66, 66, 66))
        );

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGap(559, 559, 559)
                .addComponent(jLabel5)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(minimize1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(exit1)
                .addContainerGap())
            .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel5)
                    .addComponent(minimize1)
                    .addComponent(exit1))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void jTextFieldTituloActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTextFieldTituloActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTextFieldTituloActionPerformed

    private void jTextFieldIsbnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTextFieldIsbnActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTextFieldIsbnActionPerformed

    private void jTextFieldAnioPubActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTextFieldAnioPubActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTextFieldAnioPubActionPerformed

    private void jButtonCancelarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonCancelarActionPerformed
        this.dispose();
    }//GEN-LAST:event_jButtonCancelarActionPerformed

    private void jButtonAceptarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonAceptarActionPerformed
        if(insertBookToDB()){
            JOptionPane.showMessageDialog(this, "¡Libro registrado exitosamente!", "¡Hecho!", JOptionPane.PLAIN_MESSAGE);
            jTextFieldTitulo.setText("");
            jTextFieldIsbn.setText("");
            jTextFieldAnioPub.setText("");
            jTextAreaDescripcion.setText("");
            jRadioButtonPapel.setSelected(true);
            jComboBoxEditorial.setSelectedIndex(-1);
            jRadioButtonPapel.setSelected(true);
            jTextFieldTamaño.setText("");
            jTextFieldFecha.setText("AAAA-MM-DD");
            jTextFieldLugar.setText("");
            jLabelTamaño.setEnabled(false);
            jTextFieldTamaño.setEnabled(false);
            jLabelFecha.setEnabled(true);
            jTextFieldFecha.setEnabled(true);
            jLabelLugar.setEnabled(true);
            jTextFieldLugar.setEnabled(true);  
            jSpinnerPrecio.setValue(-1f);
            jComboBoxAutor.setSelectedIndex(-1);
            labelImagen.setText("Seleccionar imagen...");
        }
    }//GEN-LAST:event_jButtonAceptarActionPerformed

    private void jRadioButtonEBookMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jRadioButtonEBookMouseClicked
        jLabelTamaño.setEnabled(true);
        jTextFieldTamaño.setEnabled(true);
        jLabelFecha.setEnabled(false);
        jTextFieldFecha.setEnabled(false);
        jLabelLugar.setEnabled(false);
        jTextFieldLugar.setEnabled(false);
    }//GEN-LAST:event_jRadioButtonEBookMouseClicked

    private void jRadioButtonPapelMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jRadioButtonPapelMouseClicked
        jLabelTamaño.setEnabled(false);
        jTextFieldTamaño.setEnabled(false);
        jLabelFecha.setEnabled(true);
        jTextFieldFecha.setEnabled(true);
        jLabelLugar.setEnabled(true);
        jTextFieldLugar.setEnabled(true);
    }//GEN-LAST:event_jRadioButtonPapelMouseClicked

    private void jLabelFechaMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jLabelFechaMouseClicked
        System.out.println(jTextFieldFecha.getText().charAt(4)+"\n"+jTextFieldFecha.getText().charAt(7)+"\n"+jTextFieldFecha.getText().substring(0,4)+"\n"+jTextFieldFecha.getText().substring(5,7)+"\n"+jTextFieldFecha.getText().substring(8,10));
    }//GEN-LAST:event_jLabelFechaMouseClicked

    private void buttonImagenActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_buttonImagenActionPerformed
        if (fileChooserImagen.showOpenDialog(this) == fileChooserImagen.APPROVE_OPTION) {
            File nuevo = new File("src/imgs/lastid.jpg");
            try {
                Files.copy(fileChooserImagen.getSelectedFile().toPath(), nuevo.toPath());
                labelImagen.setText(fileChooserImagen.getSelectedFile().getName());
            } catch (IOException ex) {
                JOptionPane.showMessageDialog(this, "Error al seleccionar imagen", "ERROR", JOptionPane.ERROR_MESSAGE);
                labelImagen.setText("Seleccionar imagen...");
                Logger.getLogger(FormularioLibro.class.getName()).log(Level.SEVERE, null, ex);
            }       
        }
    }//GEN-LAST:event_buttonImagenActionPerformed

    private void exit1MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_exit1MouseClicked

        this.dispose();
    }//GEN-LAST:event_exit1MouseClicked

    private void minimize1MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_minimize1MouseClicked

        this.setState(JFrame.ICONIFIED);
    }//GEN-LAST:event_minimize1MouseClicked

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(FormularioLibro.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(FormularioLibro.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(FormularioLibro.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(FormularioLibro.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new FormularioLibro().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.ButtonGroup buttonGroupTipo;
    private javax.swing.JButton buttonImagen;
    private javax.swing.JLabel exit1;
    private javax.swing.JFileChooser fileChooserImagen;
    private javax.swing.JButton jButtonAceptar;
    private javax.swing.JButton jButtonCancelar;
    private javax.swing.JComboBox<String> jComboBoxAutor;
    private javax.swing.JComboBox<String> jComboBoxEditorial;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabelAnioPub;
    private javax.swing.JLabel jLabelDescripcion;
    private javax.swing.JLabel jLabelDescripcion1;
    private javax.swing.JLabel jLabelDescripcion2;
    private javax.swing.JLabel jLabelDescripcion3;
    private javax.swing.JLabel jLabelDescripcion4;
    private javax.swing.JLabel jLabelFecha;
    private javax.swing.JLabel jLabelIsbn;
    private javax.swing.JLabel jLabelLugar;
    private javax.swing.JLabel jLabelPrecio;
    private javax.swing.JLabel jLabelTamaño;
    private javax.swing.JLabel jLabelTitulo;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JRadioButton jRadioButtonEBook;
    private javax.swing.JRadioButton jRadioButtonPapel;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JSpinner jSpinnerPrecio;
    private javax.swing.JTextArea jTextAreaDescripcion;
    private javax.swing.JTextField jTextFieldAnioPub;
    private javax.swing.JTextField jTextFieldFecha;
    private javax.swing.JTextField jTextFieldIsbn;
    private javax.swing.JTextField jTextFieldLugar;
    private javax.swing.JTextField jTextFieldTamaño;
    private javax.swing.JTextField jTextFieldTitulo;
    private javax.swing.JLabel labelImagen;
    private javax.swing.JLabel minimize1;
    private javax.swing.JLabel puzzle1;
    // End of variables declaration//GEN-END:variables
    public boolean insertBookToDB(){
        String libroNuevo [] = {jTextFieldTitulo.getText(),jTextFieldIsbn.getText(),jTextFieldAnioPub.getText(),jTextAreaDescripcion.getText(),getTipo()};
        int editorialIndex = jComboBoxEditorial.getSelectedIndex() + 1, autorIndex = jComboBoxAutor.getSelectedIndex() + 1;
        float precio = (float)jSpinnerPrecio.getValue();
        String fecha = jTextFieldFecha.getText().trim(), lugar = jTextFieldLugar.getText(), tamaño = jTextFieldTamaño.getText();
        boolean papel = true;
        
        if(libroNuevo[0].isEmpty()||libroNuevo[1].isEmpty()|| libroNuevo[2].isEmpty() || libroNuevo[3].isEmpty()|| editorialIndex == 0 ||  precio== -1 || autorIndex == 0){
            JOptionPane.showMessageDialog(this, "Asegurate de llenar todos los campos", "Campo/s Vacío/s", JOptionPane.WARNING_MESSAGE);
            return false;
        }
        if(labelImagen.getText().equals("Seleccionar imagen...")){
            JOptionPane.showMessageDialog(this, "Por favor ingresa la imagen (237 x 360)", "Selecciona una imagen", JOptionPane.WARNING_MESSAGE);
            return false;
        }
            
        
        if (jRadioButtonPapel.isSelected()){
            if (fecha.isEmpty()|| lugar.isEmpty()){
                JOptionPane.showMessageDialog(this, "Asegurate de llenar todos los campos", "Campo/s Vacío/s", JOptionPane.WARNING_MESSAGE);
                return false;
            }
            if(fecha.length() !=10 || fecha.charAt(4) != '-' || fecha.charAt(7) != '-'){
                JOptionPane.showMessageDialog(this, "Escribe la fecha en el siguiente formato \"AAAA-MM-DD\"", "Formato de fecha invalido", JOptionPane.WARNING_MESSAGE);
                return false;
            }
            try {
                Integer.parseInt(jTextFieldFecha.getText().substring(0,4));
                Integer.parseInt(jTextFieldFecha.getText().substring(5,7));
                Integer.parseInt(jTextFieldFecha.getText().substring(8,10));   
            } catch (NumberFormatException e) {
                JOptionPane.showMessageDialog(this, "Escribe la fecha en el siguiente formato \"AAAA-MM-DD\"", "Formato de fecha invalido", JOptionPane.WARNING_MESSAGE);
                return false;
            }  
        }else{
            papel = false;
            if(tamaño.isEmpty()){
                JOptionPane.showMessageDialog(this, "Asegurate de llenar todos los campos", "Campo/s Vacío/s", JOptionPane.WARNING_MESSAGE);
                return false;
            }
        }
        
        if(libroNuevo[0].length() > 45){
            JOptionPane.showMessageDialog(this, "Ingresa un título con menos de 45 caracteres", "Título demasiado grande", JOptionPane.WARNING_MESSAGE);
            return false;
        }
        if(libroNuevo[1].length() > 45){
            JOptionPane.showMessageDialog(this, "Ingresa un Isbn con menos de 45 caracteres", "Isbn demasiado grande", JOptionPane.WARNING_MESSAGE);
            return false;
        }
        if(libroNuevo[2].length() != 4){
            JOptionPane.showMessageDialog(this, "Ingresa un año de publicación en numeros y a 4 digitos exactos", "Formato de año", JOptionPane.WARNING_MESSAGE);
            return false;
        }
        if(libroNuevo[3].length() > 450){
            JOptionPane.showMessageDialog(this, "La descripción tiene como máximo 450 caracteres", "Formato de año", JOptionPane.WARNING_MESSAGE);
            return false;
        }
        try {
            Integer.parseInt(libroNuevo[2]);
        } catch (NumberFormatException e) {
            JOptionPane.showMessageDialog(this, "Ingresa un año de publicación en numeros y a 4 digitos exactos", "Formato de año", JOptionPane.WARNING_MESSAGE);
            return false;
        }
        
        try {
            Statement st = con.createStatement();
            st.execute("INSERT INTO libro values (null,'"+libroNuevo[0]+"','"+libroNuevo[1]+"',"+libroNuevo[2]+",'"+libroNuevo[3]+"',"+libroNuevo[4]+")");
            st.close();
        } catch (SQLException ex) {
            Logger.getLogger(FormularioLibro.class.getName()).log(Level.SEVERE, null, ex);
            JOptionPane.showMessageDialog(this, "Error en la base de datos", "MySQL", JOptionPane.ERROR_MESSAGE);
            return false;
        }
        
        int id = getLastId();
        editorialPublicaLibro(editorialIndex,id);
        autorEscribeLibro(autorIndex, id);
        if(papel)
            insertPapel(id, fecha, lugar, precio);
        else
            insertEBook(id, precio, tamaño); 
        updateImgName(id);
        return true;
    }
    
    public void editorialPublicaLibro(int editorial,int libro){
        try {
            Statement st = con.createStatement();            
            st.execute("INSERT INTO editorial_publica_libro values("+editorial+","+libro+")");
            st.close();
        } catch (SQLException ex) {
            Logger.getLogger(FormularioLibro.class.getName()).log(Level.SEVERE, null, ex);
            JOptionPane.showMessageDialog(this, "Error en la base de datos", "MySQL", JOptionPane.ERROR_MESSAGE);
        }
    }

    public void autorEscribeLibro(int autor,int libro){
        try {
            Statement st = con.createStatement();            
            st.execute("INSERT INTO autor_escribe_libro values("+autor+","+libro+")");
            st.close();
        } catch (SQLException ex) {
            Logger.getLogger(FormularioLibro.class.getName()).log(Level.SEVERE, null, ex);
            JOptionPane.showMessageDialog(this, "Error en la base de datos", "MySQL", JOptionPane.ERROR_MESSAGE);
        }
    }
    
    public void insertPapel(int libro,String fecha,String lugar,Float precio){
        try {
            Statement st = con.createStatement();
            st.execute("INSERT INTO libro_papel values("+libro+",'"+fecha+"','"+lugar+"',"+precio+")");
            st.close();
        } catch (SQLException ex) {
            Logger.getLogger(FormularioLibro.class.getName()).log(Level.SEVERE, null, ex);
            JOptionPane.showMessageDialog(this, "Error en la base de datos", "MySQL", JOptionPane.ERROR_MESSAGE);
        }
    }
    
    public void insertEBook(int libro,Float precio,String tamaño){
        try {
            Statement st = con.createStatement();
            st.execute("INSERT INTO libro_ebook values("+libro+",'"+tamaño+"',"+precio+")");
            st.close();
        } catch (SQLException ex) {
            Logger.getLogger(FormularioLibro.class.getName()).log(Level.SEVERE, null, ex);
            JOptionPane.showMessageDialog(this, "Error en la base de datos", "MySQL", JOptionPane.ERROR_MESSAGE);
        }   
    }
    
    public int getLastId(){
        int id = -1;
        try {
            Statement st = con.createStatement();
            ResultSet rs = st.executeQuery("SELECT MAX(id) FROM libro");
            while (rs.next()){
                id=rs.getInt("MAX(id)");
            }
            st.close();
            rs.close();
        } catch (SQLException ex) {
            Logger.getLogger(FormularioLibro.class.getName()).log(Level.SEVERE, null, ex);
            JOptionPane.showMessageDialog(this, "Error al obtener el ultimo id", "MySQL ERROR", JOptionPane.ERROR_MESSAGE);
        }
        return id;
    }
    
    public String getTipo(){
        if(jRadioButtonPapel.isSelected())
            return "1";
        return "2";
        //coment
    }  
    
    public void fillInComboEditorial(){
        try {
            Statement st = con.createStatement();
            ResultSet rs = st.executeQuery("SELECT nombre FROM editorial");
            while (rs.next()){
                jComboBoxEditorial.addItem(rs.getString("nombre"));
            }
            st.close();
            rs.close();
        } catch (SQLException ex) {
            Logger.getLogger(register.class.getName()).log(Level.SEVERE, null, ex);
            JOptionPane.showMessageDialog(this, "Error en la base de datos", "MySQL", JOptionPane.ERROR_MESSAGE);
            return;
        }
        jComboBoxEditorial.setSelectedIndex(-1);
    }
    
    public void fillInComboAutor(){
        try {
            Statement st = con.createStatement();
            ResultSet rs = st.executeQuery("SELECT concat(nombre,' ',apellido1,' ',apellido2) FROM autor");
            while (rs.next()){
                jComboBoxAutor.addItem(rs.getString(1));
            }
            st.close();
            rs.close();
        } catch (SQLException ex) {
            Logger.getLogger(register.class.getName()).log(Level.SEVERE, null, ex);
            JOptionPane.showMessageDialog(this, "Error en la base de datos", "MySQL", JOptionPane.ERROR_MESSAGE);
            return;
        }
        jComboBoxAutor.setSelectedIndex(-1);
    }
    
    public void updateImgName(int id){
        File img = new File("src/imgs/lastid.jpg");
        img.renameTo(new File("src/imgs/"+id+".jpg"));
        
    }
    
}
